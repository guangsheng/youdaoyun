#### 管道 
- 联想： shell命令中经常使用的管道方式
- ```int pipe(int fd[2])```  fd[0] 为读而打开 fd[1] 为写而打开。
- 通常管道是半双工的
- ```FILE * popen(const char *command, const char *mode);``` 
	- 用的就是管道的机制，内部实现是先执行fork，然后调用exec执行command。
	- mode是r,返回的指针是可读的；是w，返回的指针是可写的。
- ```int pclose(FILE *stream);```
- 当一个程序产生某个过滤程序的输入，又读取这个过滤程序的输出时，则该过滤程序就被称为协同进程(coprocess)

#### XSI IPC(消息队列，信号量和共享内存）
- 文件标识符和IPC标识符的区别：IPC标识符会一直+1，直到达到最大值后返回0，而文件标识符每次都会从最小的数开始选择
- IPC结构是在系统范围内起作用的（进程退出并不会自动删除）
- IPC结构和文件不同，查看它们的命令是ipcs, ipcrm

- 消息队列是消息的链接表，存放在内核中并有消息队列标识符标识。
	- 可以不按照先进先出次序取消息，可以按消息的类型字段取消息
	- msgget()/msgsnd/msgrcv/msgctl
- 信号量（semaphore)
	- 信号量与共享资源关联
	- 信号量大于0，可以使用该资源，使用后将信号量减一。释放后信号量值加一
	- semget/semctl/semop
- 共享存储（共享内存）： 允许多个进程共享一个给定的存储区 
	- 用信号量来实现多个进程对同一存储区的同步访问
	- shmget/shmctl

#### 高级IO-存储映射IO（映射文件）
- 使一个磁盘文件与存储空间的一个缓冲区相映射。这样就可以在不使用read和write的情况下执行IO
- 相关函数

```
#include <sys/mman.h>

void * mmap(void *addr, size_t len, int prot, int flags, int fd, off_t offset);
int munmap(void *addr, size_t len);
int msync(void *addr, size_t len, int flags);
int mprotect(void *addr, size_t len, int prot);

Currently prot can be one or more of the following:

     PROT_NONE   No permissions at all.
     PROT_READ   The pages can be read.
     PROT_WRITE  The pages can be written.
     PROT_EXEC   The pages can be executed.
```