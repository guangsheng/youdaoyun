## 参考: https://blog.csdn.net/youzhouliu/article/details/52757043

## 常用SQL
```
--查看表定义的方法
show create table 表名

--查看分区表信息
select 
  partition_name part,  
  partition_expression expr,  
  partition_description descr,  
  table_rows  
from information_schema.partitions  where 
  table_schema = schema()  
  and table_name='history_uint';  
```

## 分区表
### 创建分区
```
--创建range分区
create table emp
(empno varchar(20) not null ,
empname varchar(20),
deptno int,
birthdate date,
salary int
)
partition by range(salary)
(
partition p1 values less than (1000),
partition p2 values less than (2000),
partition p3 values less than maxvalue
);

--创建list分区
create table emp
(empno  varchar(20) not null ,
empname varchar(20),
deptno  int,
birthdate date not null,
salary int
)
partition by list(deptno)
(
partition p1 values in  (10),
partition p2 values in  (20),
partition p3 values  in  (30)
);

--创建hash分区
create table emp
(empno varchar(20) not null ,
empname varchar(20),
deptno int,
birthdate date not null,
salary int
)
partition by hash(year(birthdate))
partitions 4;

--创建key分区
create table emp
(empno varchar(20) not null ,
empname varchar(20),
deptno int,
birthdate date not null,
salary int
)
partition by key(birthdate)
partitions 4;

```

### 删除分区
```
alter table {table_name} drop partition {partition_name};
```

### 增加分区
```
alter table {table_name} add partition (partition {partition_name} values less than (xxx));
alter table {table_name} add partition (partition {partition_name} values in (xx));

```

### 重新定义分区
```
-- 重新定义range分区表
Alter table {table_name} partitionbyrange({xxx})
(
partition {partition_name_1} values less than (xxx),
partition {partition_name_2} values less than (xxx)
); ----不会丢失数据
```

### 检查分区
```
ALTER TABLE {table_name} CHECK partition {partition_name_1},{partition_name_2},...;
这个命令可以告诉分区中的数据或索引是否已经被破坏。如果发生了这种情况，使用“ALTER TABLE ... REPAIR PARTITION”来修补该分区。
```

