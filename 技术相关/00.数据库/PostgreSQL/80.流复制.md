https://github.com/digoal/blog/blob/master/201704/20170410_03.md  
https://www.postgresql.org/docs/10/static/runtime-config-replication.html#guc-vacuum-defer-cleanup-age  

备库并不是没有写，复制进程一直在写。


### 1. 主库配置
#### 1.1 vacuum_defer_cleanup_age
设置主库垃圾回收的延迟，例如配置为1000，表示垃圾版本将延迟1000个事务再被回收。

### 2. 备库配置
#### 2.1 hot_standby_feedback
如果设置为ON，备库在执行QUERY时会通知主库，哪些版本需要被保留。

#### 2.2 max_standby_archive_delay， max_standby_streaming_delay
表示当备库的QUERY与恢复进程发生冲突时，恢复进程最长的等待时间，当恢复进程从被冲突堵塞开始等待时间超过以上设置时，会主动KILL与之发生冲突的QUERY，然后开始恢复，直到catch up，才允许QUERY与恢复进程再次发生冲突。