```SQL
--查询当前还在执行的执行时间最长的SQL
SELECT now(), query, 
       EXTRACT(EPOCH FROM NOW()) - EXTRACT(EPOCH FROM query_start) AS duration 
  FROM pg_stat_activity 
 WHERE state = 'active' 
   AND pid != pg_backend_pid()
 ORDER BY duration DESC 
 LIMIT 1;

--查询checkpoint信息
select * from pg_stat_bgwriter;
SELECT EXTRACT(EPOCH FROM NOW() - stats_reset) from pg_stat_bgwriter;

--查询当前某个配置参数的实际配置情况
select current_setting('max_connections');

--查看数据库信息
SELECT 
    d.oid as oid, 
    d.datname as path, 
    d.datname as database, 
    pg_catalog.pg_encoding_to_char(d.encoding) as encoding, 
    d.datcollate as lc_collate, 
    d.datctype as lc_ctype, 
    pg_catalog.pg_get_userbyid(d.datdba) as owner, 
    t.spcname as tablespace, 
    pg_catalog.pg_database_size(d.datname)/1024/1024 as size,
    AGE(datfrozenxid) as age, --age用于测量从上次冻结的XID到当前事务XID的数目
    pg_catalog.shobj_description(d.oid, 'pg_database') as description 
FROM pg_catalog.pg_database d 
    JOIN pg_catalog.pg_tablespace t on d.dattablespace = t.oid 
WHERE 
    d.datallowconn = 't' 
    AND d.datistemplate = 'n' 
ORDER BY 1;

--获取数据库启动时间
SELECT pg_postmaster_start_time();


--显示那些当前准备好进行两阶段提交的事务的信息
select * from pg_prepared_xacts;
--显示所有当前会话中可用的预备语句
select * from pg_prepared_statements;

--查询表空间信息
SELECT  
  n.oid AS oid, 
  current_database() || '.' || n.nspname AS path, 
  n.nspname AS schema, 
  n.nspname AS namespace, 
  current_database() AS database, 
  pg_catalog.pg_get_userbyid(n.nspowner) AS owner, 
  pg_catalog.obj_description(n.oid, 'pg_namespace') AS description 
FROM pg_catalog.pg_namespace n 
WHERE  
  n.nspname !~ '^pg_'  
  AND n.nspname <> 'information_schema' 
ORDER BY namespace;

--获取各表空间占用磁盘大小
SELECT 
  SUM(pg_relation_size(quote_ident(schemaname) || '.' || quote_ident(tablename))::bigint)/1024/1024 as size, tablespace
  FROM pg_tables 
 GROUP by tablespace;

--获取各模式占用磁盘大小
SELECT 
  SUM(pg_relation_size(quote_ident(schemaname) || '.' || quote_ident(tablename))::bigint)/1024/1024 as size, schemaname
  FROM pg_tables 
 GROUP by schemaname;
 
--查看指定表IO信息
select * from pg_statio_all_tables where relname = 

```