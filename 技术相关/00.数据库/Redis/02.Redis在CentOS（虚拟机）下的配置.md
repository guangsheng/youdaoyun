### Redis配置项

配置名称|配置说明|实际配置
--------|--------|--------
port|端口号|6379
logfile|日志文件|/opt/fisher/redis/log/redis.log
dir|存放持久化文件和日志文件的目录|/opt/fisher/redis/data
daemonize| 是否后台运行|yes
pidfile|后台运行时的pid文件，redis通过监控该文件确定redis是否在运行|/opt/fisher/redis/redis_6379.pid

### 操作系统配置项
#### /proc/sys/net/core/somaxconn  修改为 1024
echo "1024" > /proc/sys/net/core/somaxconn
#### /etc/sysctl.conf
1. 修改文件
vm.overcommit_memory = 1

2. 执行命令  
sysctl vm.overcommit_memory=1

#### Transparent Huge Pages (THP) 
1. 执行如下命令，修改大内存页配置
echo never > /sys/kernel/mm/transparent_hugepage/enabled
2. 修改 /etc/rc.local 文件，文件中增加  
echo never > /sys/kernel/mm/transparent_hugepage/enabled

#### 要解决的问题
1. The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128
2. WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect.
3. WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled.